%section{id:"#{div_id}"}
  .container{'ng-controller' => "#{ng_controller}", 'ng-init' => "init(#{category.to_json},'#{div_id}')"}
    .section-heading.scrollpoint.sp-effect3.active.animated.fadeInDown
      .row
        .col-md-12
          %ol.breadcrumb.text-left
            %li{'ng-repeat' => 'parent in parents'}
              %button.btn.btn-link{'ng-click' => 'seeChildren(parent)'}
                {{parent.name}}
            %div
              %span{'ng-show' => 'hasDescription'}
                %a{href:'', rel:'nofollow', 'ng-click' => 'toggleShowDescription()', 'ng-hide' => 'showDescription'}
                  %i.fa.fa-plus-circle.fa-2x.swing
                %a{href:'', rel:'nofollow', 'ng-click' => 'toggleShowDescription()', 'ng-show' => 'showDescription'}
                  %i.fa.fa-minus-circle.fa-2x.swing
              %a{'ng-href' => '/index/{{current_parent.action()}}', style:'margin-left:0.5em', target:'_blank'}
                %i.fa.fa-folder-open.fa-2x.swing
              %div{'ng-show' => 'showDescription'}
                %q-markdown{data:'current_parent.description'}

      .row.qapp-category{'ng-show' => 'hasCategories'}
        .col-sm-4{'ng-repeat' => 'category in categories'}
          %button.btn.btn-link{'ng-click' => 'seeChildren(category)'}
            {{category.name}}

      .row{'ng-show' => 'hasItems'}
        .col-md-12.text-left
          %button.btn-link{'ng-click' => 'setShowChart(false)'}
            %i.fa.fa-tasks.fa-2x
          %button.btn-link{'ng-click' => 'setShowChart(true)'}
            %i.fa.fa-line-chart.fa-2x

          %table.table.table-bordered.table-hover.qapp-item{'ng-show' => '!showChart'}
            %tr
              %th
                Name
              %th{style:'width:2em'}
                Rank
              %th{style:'width:2em'}
                Trend
              %th{style:'width:2em'}
                Links
              %th
                Platform(s)
              %th
                License(s)
              %th{'ng-repeat' => '(field,type) in current_parent.fields_def'}
                {{field.camelize(true)}}
            %tr{'ng-repeat' => 'item in items'}
              %td.text-left
                {{item.name}}
              %td.text-left
                {{item.rank}}

              %td.trend{class:'trend{{item.trend}}', style:'position:relative'}
                %i.fa.fa-2x
                %div{style:'position:absolute; bottom:0px; right:0px; width:30%; height:30%;font-size:60%; text-align:center; vertical-align:bottom; opacity:0.7;'}
                  {{item.trend}}

              %td.text-left
                %a{href:"{{item.website}}", rel:'nofollow', target:'_blank', 'ng-show' => 'item.website'}
                  %i.fa.fa-external-link
                %a{href:"http://en.wikipedia.org/wiki/{{item.wiki_name}}", rel:'nofollow', target:'_blank', 'ng-show' => 'item.wiki_name', style:'font-family: Timew New Roman; text-decoration:none; margin-left:4px'}
                  W
              %td.text-left
                {{item.platform_names}}
              %td.text-left
                {{item.license_names}}
              %td.text-left{'ng-repeat' => '(field,type) in current_parent.fields_def'}
                {{item.fields[field]}}

          %div{id:"#{div_id}_chart",'ng-show' => 'showChart', style:'height:500px'}
            Loading

    -#%h1 Trends
    -#-#%script(src="about:blank")
    -#%script(src="//www.google.com/trends/embed.js?hl=en-US&q=html5,jquery&tz&content=1&cid=TIMESERIES_GRAPH_0&export=5&w=500&h=330")
